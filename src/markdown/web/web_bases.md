# Основные концепции

## Система доменных имен - Domain Name System (DNS)

\- преобразует доменные имена в соответствующие IP-адреса

Основой DNS-системы являются корневые серверы (13 шт). Для повышения устойчивости системы существуют их копии в разных странах. Каждой копии присваивается тот же IP DNS-сервера, что и у главного устройства. Корневые DNS-серверы хранят информацию только о DNS-серверах, ответственных за доменные зоны.
DNS-серверы каждой зоны хранят информацию о DNS-серверах всех доменов в этой зоне.
У каждого интернет-провайдера есть локальные (кеширующие) DNS-серверы.

При вводе в строке браузера доменного имени, браузер ищет на локальном компьютере файл hosts. В нем задаётся соответствие домена IP-адресу.Если такая запись есть, сайт сразу откроется. Если же записи нет, браузер формирует DNS-запрос к интернет-провайдеру. Провайдер ищет запись в своем кеше или отправляет запрос корневым DNS-серверам. Корневой DNS-сервер возвращает провайдеру IP-адрес DNS-сервера доменной зоны. Провайдер запрашивает у DNS-сервера зоны IP-адрес DNS-сервера домена, и затем уже от последнего он получает IP-адрес домена, сохраняет его в своем кеше и отдает браузеру. Браузер обращается к хостингу по полученному IP-адресу.

## Балансировщик нагрузки

\- это сетевое устройство или программное обеспечение, которое распределяет входящий сетевой трафик между несколькими серверами для обеспечения оптимального использования ресурсов, уменьшения задержки и поддержания высокой доступности.

Он играет жизненно важную роль в масштабировании приложений и эффективном управлении рабочими нагрузками серверов, особенно в ситуациях, когда происходит внезапный всплеск трафика или неравномерное распределение запросов между серверами. Подсистемы балансировки нагрузки используют различные алгоритмы для определения того, как распределять входящий трафик

## Шлюз API (API Gateway)

\- это сервер или служба, которая выступает в качестве посредника между внешними клиентами и внутренними микросервисами или серверными службами приложения на основе API.

Он упрощает процесс связи и обеспечивает единую точку входа для клиентов для доступа к различным службам.

Основные функции API-шлюза:

- Маршрутизация запроса на основе предопределенных правил и конфигураций.
- Аутентификация и авторизация, гарантирующие, что только авторизованные клиенты могут получить доступ к сервисам
- Ограничение скорости и throttling(регулировка запросов от клиентов на основе предопределенных политик) для защитиы серверных служб от чрезмерной нагрузки или злоупотреблений.
- Кэширование часто используемых ответов.
- Преобразование запросов и ответов: преобразование форматов данных, добавление или удаление заголовков или изменение параметров запроса, для совместимости между клиентами и службами.

## CDN

Сеть доставки контента (CDN) — это распределенная сеть серверов, которые хранят и доставляют контент, такой как изображения, видео, CSS и скрипты, пользователям из географически более близких мест.

Когда пользователь запрашивает контент с веб-сайта или приложения, запрос направляется на ближайший сервер CDN, также известный как пограничный сервер (edge server).
Если на пограничном сервере запрошенное содержимое закэшировано, он напрямую передает его пользователю
Если контент не кэшируется на пограничном сервере, CDN извлекает его с исходного сервера или другого ближайшего сервера CDN. После получения содержимого оно кэшируется на пограничном сервере и передается пользователю.
Чтобы убедиться, что контент остается актуальным, CDN периодически проверяет исходный сервер на наличие изменений и соответствующим образом обновляет свой кэш.

## Proxy

Прямой прокси (forward proxy) - сервер, который находится перед одной или несколькими клиентскими машинами и выступает в качестве посредника между клиентами и Интернетом. Когда клиентский компьютер делает запрос к ресурсу в Интернете, запрос сначала отправляется на прокси-сервер. Затем прокси-сервер пересылки пересылает запрос в Интернет от имени клиентского компьютера и возвращает ответ клиентскому компьютеру.

Обратный прокси (reverse proxy) — это сервер, который находится перед одним или несколькими веб-серверами и выступает в качестве посредника между веб-серверами и Интернетом. Когда клиент делает запрос к ресурсу в Интернете, запрос сначала отправляется на обратный прокси-сервер. Затем обратный прокси-сервер перенаправляет запрос на один из веб-серверов, который возвращает ответ обратному прокси-серверу. Затем обратный прокси-сервер возвращает ответ клиенту.

## Кэширование

Кэш — это высокоскоростной уровень хранения, который находится между приложением и исходным источником данных, таким как база данных, файловая система или удаленная веб-служба. Когда данные запрашиваются приложением, они сначала проверяются в кэше. Если данные найдены в кэше, они возвращаются в приложение. Если данные не найдены в кэше, они извлекаются из исходного источника, сохраняются в кэше для использования в будущем и возвращаются в приложение.

## Секционирование данных

\- это разделение таблицы базы данных на отдельные фрагменты с раздельными настройками физического хранения.
Фрагменты могут хранится на разных компьютерах или дисках одного компьютера. Секционирование используется в целях повышения производительности и доступности больших баз данных. Это достигается за счет параллельного чтения и записи на различных дисках, а также работы оптимизатора запросов.

### Типы секционирования

**Вертикальное**

Разбиение таблицы «по столбцам». Условие корректности: секции содержат надключ.

Преимущества:

- Отделение «частых» данных от «редких»
- Защита информации (можно задать разные права доступа на разные секции)

**Горизонтальное**

Разбиение таблицы «по строкам». Условие корректности: каждая строка попадает ровно в одну секцию.

Преимущества:

- Отделение «близких» данных от «дальних» (например, зависящих от времени).
- Прозрачность для пользователя

## Репликация базы данных

\- хранение нескольких копий одной и той же базы данных на разных серверах или в разных расположениях. Основной целью репликации баз данных является повышение доступности, избыточности и отказоустойчивости данных, гарантируя, что система продолжит функционировать даже в случае сбоев оборудования или других проблем.

Один сервер выступает в качестве основной (или главной) базы данных, в то время как другие функционируют как реплики. Между основной базой и репликами выполняется синхронизация данных.

Преимущества:

- _Улучшенная производительность:_ Распределяя запросы на чтение между несколькими репликами, можно снизить нагрузку на базу данных-источник и сократить время отклика на запросы.

- _Высокая доступность:_ В случае сбоя или простоя базы данных-источника реплики могут продолжать обслуживать данные, обеспечивая бесперебойный доступ к приложению.

- _Улучшенная защита данных:_ Наличие нескольких копий базы данных в разных расположениях помогает защититься от потери данных из-за сбоев оборудования или других аварий.

- _Балансировка нагрузки:_ Реплики могут обрабатывать запросы на чтение, что позволяет лучше распределять нагрузку и снижает общую нагрузку на базу данных-источник

## Распределенные системы обмена сообщениями (брокеры сообщений)

Распределенные системы обмена сообщениями позволяют обмениваться сообщениями между несколькими потенциально географически рассредоточенными приложениями, службами или компонентами надежным, масштабируемым и отказоустойчивым образом.

\- посредники между сервисами. Они находятся в центре архитектуры и управляют потоками информации. Благодаря этому каждый сервис может послать сообщение другому сервису или целой группе сервисов. Такой подход стал популярен с развитием микросервисов

Преимущества:

- обеспечивают асинхронную работу компонентов системы Вместо того, чтобы планировать архитектуру, где каждый компонент посылает запросы к другим компонентам и ожидает от них ответа, вы просто отправляете сообщение в брокер. А один или несколько сервисов получают это сообщение и обрабатывают его в удобное время, что позволяет не блокировать программы.

- позволяют сервисам ничего не знать о том, кто их обрабатывает. За счёт этого разные компоненты могут оставаться полностью изолированными и самостоятельными

Популярные брокеры сообщений:

[RabbitMQ](https://habr.com/ru/companies/slurm/articles/684412/)

[Apache Kafka](https://practicum.yandex.ru/blog/broker-soobsheniy-apache-kafka)

## Микросервисы

\- единое приложение строится как набор небольших слабосвязанных и независимо развертываемых служб. Эти сервисы построены вокруг бизнес-потребностей и развертываются независимо с использованием полностью автоматизированной среды. Существует абсолютный минимум централизованного управления этими сервисами. Сами по себе эти сервисы могут быть написаны на разных языках и использовать разные технологии хранения данных.

Основные характеристи:

- _Единая ответственность:_ Каждый микросервис фокусируется на определенной функциональности или предметной области.

- _Независимость:_ Микросервисы можно разрабатывать, развертывать и масштабировать независимо друг от друга. Это обеспечивает повышенную гибкость и оперативность процесса разработки, поскольку команды могут одновременно работать над различными сервисами, не влияя на всю систему.

- _Децентрализованность:_ каждый сервис владеет своими данными и бизнес-логикой. Это способствует разделению обязанностей и позволяет командам принимать решения и выбирать технологии, которые наилучшим образом соответствуют их конкретным требованиям.

- _Коммуникация:_ Микросервисы взаимодействуют друг с другом с помощью облегченных протоколов, таких как HTTP/REST, gRPC или очередей сообщений. Это способствует функциональной совместимости и упрощает интеграцию новых сервисов или замену существующих.

- _Отказоустойчивость:_ Поскольку микросервисы независимы, сбой в одной службе не обязательно приводит к сбою всей системы. Это может помочь повысить общую устойчивость приложения.

## Базы данных NoSQL

\- нереляционные базы данных, предназначенные для хранения, управления и извлечения неструктурированных или частично структурированных данных.

Преимущества:

- гибкость,
- масштабируемость
- способности обрабатывать большие объемы данныхразделить на

Основные типы:

- **Документные:** хранят данные в структурах, похожих на документы, таких как JSON или BSON. Каждый документ является автономным и может иметь свою уникальную структуру, что делает их пригодными для работы с разнородными данными. _MongoDB, Couchbase_

- **Ключ-значение:** хранят данные в виде пар "ключ-значение", где ключ выступает в качестве уникального идентификатора, а значение содержит связанные данные. Они очень эффективны для простых операций чтения и записи, и их можно легко секционировать и масштабировать по горизонтали. _Redis, Amazon DynamoDB_

- **Колончатые:** хранят данные в семействах столбцов, которые представляют собой группы связанных столбцов. Они предназначены для обработки рабочих нагрузок с большим количеством операций записи и очень эффективны для запроса данных с известными ключами строк и столбцов. _Apache, Cassandra, HBase_

- **Графовые:** предназначены для хранения и запроса данных, которые имеют сложные отношения и взаимосвязанные структуры, такие как социальные сети или рекомендательные системы. Графовые базы данных используют узлы, ребра и свойства для представления и хранения данных, что упрощает выполнение сложных обходов и запросов на основе связей. _Neo4j, Amazon Neptune_

## Индексы базы данных

\- это структуры данных, которые повышают скорость и эффективность операций запросов в базе данных. Индексы обычно строятся на основе одного или нескольких столбцов таблицы базы данных. Наиболее распространенным типом индекса является индекс B-дерева, который организует данные в иерархическую древовидную структуру, что позволяет быстро выполнять операции поиска, вставки и удаления. Существуют и другие типы индексов, такие как растровые индексы и хэш-индексы. Хотя индексы могут значительно повысить производительность запросов, у них также есть некоторые ограничения:

- _Место для хранения:_ Индексы занимают дополнительное пространство для хранения, так как они создают и поддерживают отдельные структуры данных наряду с исходными табличными данными.

- _Производительность записи:_ При вставке, обновлении или удалении данных в таблице необходимо также обновить связанные индексы, что может замедлить операции записи.

## Распределенные файловые системы

\ - это решения для хранения и управления файлами и каталогами на нескольких серверах, узлах или машинах. Они позволяют пользователям и приложениям получать доступ к файлам и управлять ими, как если бы они хранились в локальной файловой системе. Часто используются в крупномасштабных или распределенных вычислительных средах для обеспечения отказоустойчивости, высокой доступности и повышения производительности.

## Система уведомлений

используется для отправки уведомлений или предупреждений пользователям, таких как электронные письма, push-уведомления или текстовые сообщения.

## Полнотекстовый поиск

поиск позволяет пользователям искать определенные слова или фразы в приложении или на веб-сайте. Использует инвертированный индекс, который представляет собой структуру данных, которая сопоставляет слова или фразы с документами, в которых они появляются. _Elastic Search_

## Распределенный сервис координации

системы, предназначенные для управления и координации деятельности распределенных приложений, служб или узлов надежным, эффективным и отказоустойчивым образом. Они помогают поддерживать согласованность, обрабатывать распределенную синхронизацию и управлять конфигурацией и состоянием различных компонентов в распределенной среде. Распределенные координационные службы особенно полезны в крупномасштабных или сложных системах, таких как микросервисные архитектуры, распределенные вычислительные среды или кластерные базы данных. _Apache ZooKeeper, etcd, Consul_

# Документирование кода в Python

**Документирование** — важная часть разработки, позволяющая другим разработчикам (и самому себе в будущем!) быстро понять назначение, структуру и детали реализации кода. В Python основной инструмент — докстринги (docstrings), поддерживаются и автоматические системы генерации документации.

---

## Докстринги

- **Докстринг** — строка (обычно многострочная), размещённая первой внутри модуля, класса, функции или метода.
- Используется для описания назначения и параметров, автоматически доступен через атрибут `. __doc__`.
- Часто используется стиль Google, NumPy или reStructuredText для оформления докстрингов.

**Пример докстринга для функции:**

```python
def add(a, b):
    """
    Складывает два числа.

    Args:
        a (int or float): Первое слагаемое.
        b (int or float): Второе слагаемое.

    Returns:
        int or float: Сумма a и b.
    """
    return a + b
```

**Докстринги для классов и модулей:**

```python
class Person:
    """
    Класс, представляющий человека.

    Attributes:
        name (str): Имя человека.
        age (int): Возраст.
    """

    def __init__(self, name, age):
        self.name = name
        self.age = age
```

---

## Форматы и стили докстрингов

- **Google style**

  ```
  def foo(a, b):
      """
      One line summary.

      Args:
          a (int): The first parameter.
          b (str): The second parameter.

      Returns:
          bool: Description of return value.
      """
  ```

- **NumPy style**

  ```
  def foo(a, b):
      """
      One line summary.

      Parameters
      ----------
      a : int
          The first parameter.
      b : str
          The second parameter.

      Returns
      -------
      bool
          Description of return value.
      """
  ```

- **reStructuredText (Sphinx) style**

  ```
  def foo(a, b):
      """
      One line summary.

      :param a: The first parameter.
      :type a: int
      :param b: The second parameter.
      :type b: str
      :return: Description of return value.
      :rtype: bool
      """
  ```

---

## Автоматическая генерация документации

- Для больших проектов удобно автоматически создавать красивую документацию из докстрингов с помощью инструментов:

### Sphinx

- Классический инструмент для автодокументирования Python-кода.
- Генерирует сайт с документацией (HTML, PDF и др.) на основе reStructuredText + автосборка API из кода.
- Отлично интегрируется с ReadTheDocs.

**Установка и базовое использование:**

```bash
pip install sphinx
sphinx-quickstart
# В конфиге conf.py добавьте 'sphinx.ext.autodoc'
# Добавьте в .rst-файл директиву:
# .. automodule:: mypackage.mymodule
#    :members:
# Далее соберите документацию:
make html
```

### pdoc

- Лёгкий современный генератор документации из docstring, поддерживает markdown.
- Очень прост в настройке, результат сразу готов в HTML.

**Установка и использование:**

```bash
pip install pdoc
pdoc mymodule.py
# Откроется html-страница с документацией по модулю
```

---

## Интересные детали и советы

- Докстринги видны через функцию help():
  ```python
  help(add)
  ```
- Докстринг функции должен быть оформлен строго первой строкой после def, иначе не будет подхвачен автодокументацией.
- Можно документировать и переменные модуля через отдельный комментарий `:var name: description` (для Sphinx).
- Докстринги используются IDE для автокомплита, всплывающих подсказок и перехода к описанию.
- Докстринги с примером использования повышают шансы на понимание и корректное применение функции.

---

## Типичные ошибки и подводные камни

- Нет докстрингов в публичном API — документация будет неполной.
- Противоречие между кодом и докстрингом (забыли обновить).
- Некорректный формат (отступы, структура, порядок описания параметров).
- Докстринги с неполными или неактуальными примерами.

---

## Ссылки на документацию и полезные ресурсы

- [PEP 257 — Конвенции по оформлению докстрингов](https://peps.python.org/pep-0257/)
- [Sphinx Documentation](https://www.sphinx-doc.org/en/master/)
- [pdoc documentation](https://pdoc.dev/)
- [Докстринги в Python (статья на Хабре)](https://habr.com/ru/post/282955/)

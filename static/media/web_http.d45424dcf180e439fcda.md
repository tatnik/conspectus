# Что такое HTTP

Протокол передачи гипертекста (Hypertext Transfer Protocol, HTTP). Это протокол прикладного уровня для передачи гипертекстовых документов, таких как HTML. Он создан для связи между веб-браузерами и веб-серверами. Протокол следует классической клиент-серверной модели. Клиент открывает соединение для создания запроса, а затем ждет ответа.

HTTP - это протокол без сохранения состояния, т.е. сервер не сохраняет никаких данных (состояние) между двумя парами "запрос-ответ". Несмотря на то, что HTTP основан на TCP/IP, он также может использовать любой другой протокол транспортного уровня с гарантированной доставкой.

## Особенности протокола HTTP

_Простота_. HTTP удобен и прост для восприятия человеком. HTTP сообщения легко читать и тестировать.

_Расширяемость_. За счет HTTP-заголовков можно легко его расширить, добавив новую функциональность на основе соглашений между клиентом и сервером.

_Нет состояния, но есть сессия_. Между разными запросами не существует связи. Однако, cookie позволяют использовать сессии для идентификации пользователей.

_Соединение управляется на транспортном уровне_. Протокол требует надёжность и отсутствие потерянных сообщений. Подходящим транспортным протоколом является TCP.

## Отличия HTTP/1.0, HTTP/1.1, HTTP/2

_HTTP/1.0_ открывал TCP-соединение для каждого обмена запросом/ответом. Открытие соединения требует нескольких обменов сообщениями, и потому это медленный процесс.

_HTTP/1.1_ предоставил конвейерную обработку (которую оказалось трудно реализовать) и устойчивые соединения: лежащее в основе TCP соединение можно частично контролировать через заголовок Connection.

_HTTP/2_ добавил мультиплексирование сообщений через простое соединение, помогающее держать соединение теплым и более эффективным.

## HTTP методы

Эти методы указывают действие, которое должно быть выполнено для указанного ресурса. Также эти методы иногда называют HTTP глаголами. Эти методы отличаются семантикой.

_GET_ извлечение (чтение) данных ресурса
_POST_ для отправки данных к указанному ресурсу; для изменения состояния и/или побочные эффекты
_PUT_ для замены данных ресурса данными из запроса
_PATCH_ для частичного изменения ресурса
_DELETE_ для удаления ресурса
_HEAD_ запрос ресурса, но в отличие от GET, без тела ответа
_CONNECT_ устанавливает туннель к серверу
_OPTIONS_ для описания параметров соединения с указанным ресурсом
_TRACE_ для вызова тестового сообщения

## Из чего состоит HTTP-запрос?

_HTTP-метод_ - глагол (например, GET, POST) или существительное (например, OPTIONS, HEAD), которое определяет действие, которое хочет выполнить клиент.

_Путь к ресурсу_:
протокол (http://)
домен (example.com)
TCP порт (80)

_Версия HTTP-протокола_.

_Заголовки (опционально)_. Предоставляют дополнительную информацию для сервера.

_Тело запроса (опционально)_. Некоторые методы (например, POST), могут содержать данные об отправляемом ресурсе.

## Что такое HTTP cookie?

HTTP cookie (куки) - это небольшой фрагмент данных, который отправляется сервером в браузер пользователя. Далее браузер может сохранить cookie и отправлять обратно серверу с каждым запросом.

Такой механизм позволяет узнать, с одного и того же браузера были отправлены запросы или нет. Это используется, например, для аутентификации пользователя.

Сам протокол HTTP не хранит состояние, механизм cookie позволяет добавить в него состояние.

Cookie можно настраивать, задав срок действия или срок его существования.

Также можно указать ограничения на путь и домен.

Если флаг HttpOnly не установлен, то доступ к существующим cookies можно получить через JavaScript.

## Для чего используют HTTP cookie?

Cookie используются, главным образом, для:

- Управления сеансом (логины, корзины для виртуальных покупок)

- Персонализации (запоминать предпочтения пользователя)

- Мониторинга (отслеживания поведения пользователя)

Получив HTTP-запрос, сервер вместе с ответом может отправить заголовок Set-Cookie. Cookie обычно запоминаются браузером и отправляются в HTTP заголовке с каждым последующим запросом к серверу, который сохранил эти cookie.
